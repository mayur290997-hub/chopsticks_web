{% extends 'dashboard/web_dash.html' %}
{% load static %}


{% block stylesheets %}
{% endblock stylesheets %}

{% block headscript %}
{% endblock headscript %}


{% block content %}
<form method="POST" action="{% url 'orders:select_order_item' outlet_objects.pk %}">
    {% csrf_token %}
    <div class="menu-page-main">
        <div class="menu-pg-two">
            <div class="menu-nav-bar-div">
                <div class="top_scroll_nav_bar">
                <div class="row">
                    <div class="col-1">
                        <i class="fa fa-angle-left" style="font-size:22px;color:#e2d9d9" aria-hidden="true"></i>
                    </div>
                    <div class="col-10">
                        <div class="menu-item-nm" style="margin-left:-5px;">
                            {% for section in food_section1 %}
                            <span><a href="#menu{{section.pk}}" class="active-nav1 {% if section.pk == food_objects.pk %}active-nav1 {% endif %}">{{section.section_name}}</a></span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-1">
                        <i class="fa fa-angle-right" style="float:right;font-size:22px;color:#e2d9d9" aria-hidden="true"></i>
                    </div>
                </div>
                </div>
                <br>
                <div class="menu-card">
                    {% for section in food_section1 %}
                    {% if section.is_active == True %}
                    <div class="order-first section-div" id="menu{{section.pk}}">
                        <div class="container">
                            <div class="row border-div">
                                <div class="col-6">
                                    <div class="">
                                        <h6 class="menu-line3">{{section.section_name}}</h6>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center">
                                        <i class="fa fa-square green-fa"></i> <span class="veg-txt">VEG</span> <i class="fa fa-square orange-fa"></i>
                                        <span class="veg-txt">NON VEG </span><i class="fa fa-angle-right" style="float:right;margin-top:7px;" aria-hidden="true" id="order-check1{{section.pk}}"></i>
                                    </div>
                                </div>
                            </div>
                            <div id="order-div{{section.pk}}" style="display: none">
                                {% for one in section.dishes_set.all %}
                                {% if one.is_active == True %}
                                <div class="one-menu">
                                    <div class="menu-item item-div">
                                        <div class="row ">
                                            <div class="col-8">
                                                <div class="">
                                                    <i class="fa fa-square {% if one.dish_type == 1 %} green-fa {% elif one.dish_type == 2 %} orange-fa {% else %}{% endif %}"></i> <span class="menu-item-nm">{{one.dish_name}}</span>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="text-center">
                                                    <span class="menu-item-price center"><i class="fa fa-inr center" aria-hidden="true"></i> {{one.amount}}</span> <input class="radio-btn12" type="checkbox" value="{{one.pk}}" name="dish{{one.pk}}" id="order-ck{{one.pk}}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="quantity-div" id="order-d{{one.pk}}" style="display: none">
                                        <div class="form-row">
                                            <div class="col-4">
                                                <div class="form-row">
                                                    <div class="col-4">
                                                        <span class="qty">Qty</span>
                                                    </div>
                                                    <div class="col-8">
                                                        <select name="quantity{{one.pk}}" id="quantity{{one.pk}}" class="form-control form-control-sm qty-input">
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {% if one.dish_type != 3 %}
                                            <div class="col">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input radio-btn1 " type="checkbox" id="extra_item1{{one.pk}}" name="extra_item1{{one.pk}}" value="1">
                                                    <label class="form-check-label extra-item-txt" for="inlineRadio1">{{one.extra_item_1}}</label>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input radio-btn1" type="checkbox" id="extra_item2{{one.pk}}" name="extra_item2{{one.pk}}" value="1">
                                                    <label class="form-check-label extra-item-txt" for="inlineRadio2">{{one.extra_item_2}}</label>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <div class="bottom-first">
        <div class="container-fluid">
            <div class="row">
                <div class="col-5">
                    <div class="">
                        <h6 class="menu-line1" style="font-size: 13px;">Items Selected </h6>
                        <h6 class="menu-line2">Your Order Total</h6>
                    </div>
                </div>
                <div class="col-3">
                    <div class="">
                        <h6 class="menu-line12">0</h6>
                        <h6 class="menu-line22 rs-btn"><i class="fa fa-inr" aria-hidden="true"></i> <b>0</b></h6>
                    </div>
                </div>
                <div class="col-4">
                    <div class="">
                        <button class="btn btn-sm green-btn menu-btn1">PLACE<br> ORDER</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
{% endblock %}

{% block script %}
{% endblock %}

{% block extrascript %}

<script>
    $(function() {
        {% for section in food_section1 %} {% for one in section.dishes_set.all %}
        $('#order-ck{{one.pk}}').click(function() {
            if ($(this).is(':checked')) {
                $('#order-d{{one.pk}}').show();
            } else {
                $('#order-d{{one.pk}}').hide();
            }
        }); {% endfor %} {% endfor %}
    });

</script>
{% for section in food_section1 %}
<script>
    $('#order-check1{{section.pk}}').click(function() {
        if ($('#order-div{{section.pk}}').css('display') == 'none') {
            $('#order-div{{section.pk}}').show();
        } else {
            $('#order-div{{section.pk}}').hide();
        }
    });

</script>
{% endfor %}

<script>
    $('#item_menu_check1,#item_qty1,#extra11,#extra12').click(function() {
        if ($('#item_menu_check1').is(':checked')) {
            var item_price = $('#item1').val();
            var item_qty = $('#item_qty1').val();
            if ($('#extra11').is(':checked')) {
                var extra_rs1 = $('#extra_rs11').val();
            } else {
                var extra_rs1 = 0;
            }
            if ($('#extra12').is(':checked')) {
                var extra_rs2 = $('#extra_rs12').val();
            } else {
                var extra_rs2 = 0;
            }
        } else {
            var item_price = 0;
            var item_qty = $('#item_qty1').val();
            var extra_rs1 = 0;
            var extra_rs2 = 0;
        }

        var total_sum_of_one_item = (item_price * item_qty) + parseInt(extra_rs1) + parseInt(extra_rs2)
        console.log(item_price);
        console.log(item_qty);
        console.log(extra_rs1);
        console.log(extra_rs2);
        console.log(total_sum_of_one_item);
    });

</script>


{% endblock %}
